---
title: Module User-Config Definitions
sidebar_label: User-Config Definitions
sidebar_position: 15
description: Module feedback definition details.
---

The module configuration is like preferences for the connection. E.g. the IP-address of the device controlled by the instance. The config object itself is a JavaScript object defined by you. In TypeScript, you create a type, interface,
or class to define your config object and then use that type in declaring your InstanceBase class, i.e. `class ModuleInstance extends InstanceBase<MyConfigType>` (see src/main.ts in the [TypeScript module template](https://github.com/bitfocus/companion-module-template-ts)).

## Control flow (API calls)

API calls: `getConfigFields()`, `saveConfig()`, `configUpdated()`

As part of creating a module, you should implement the [`getConfigFields()` method](https://bitfocus.github.io/companion-module-base/classes/InstanceBase.html#getConfigFields).

Companion will call this when the configuration panel is opened for your module, so that it can present the correct fields to the user. See the next section, below, for details.

When your module is initialised, you will be provided a copy of the config, and any time the user changes the configuration, [`configUpdated()`](https://bitfocus.github.io/companion-module-base/classes/InstanceBase.html#configupdated) will be called.

If you need to programmatically change the config object, for example to save some persistent state or to allow actions to change the config, call `saveConfig(newconfig)`. (This will not trigger `configUpdated()`.)

## User-Config definitions

The fields you can use here are similar to the ones for actions and feedbacks, but with more limitations. See the [list of field types](./input-field-types.md) for more details.The linked documentation states any limitations that apply when used for the configuration, or if they are not allowed.

### Layout

Each field is required to have a `width` property. This should be a value 1-12, specifying how many columns the field needs in the UI.

As of module-api v1.14.0, the connection config provides less granular control over the layout, instead placing everything in a single column. This has been done to unify the layout with elsewhere within Companion.

At the moment (in Companion v4.2) it is possible to opt into the old layout, if you are not ready to ensure this works well for your module, you can opt out by adding in the constructor `this.options.disableNewConfigLayout = true`. This should only be done as a temporary measure, at some point in the future this will not be supported.

If you do this, let us know what is missing for you to switch. We recognise that there may be functionality you need and want to expand upon what the new layout offers.

### Connecting to your device

If you are connecting over the network, your device may be discoverable using the Bonjour protocol. See the advanced topic [Bonjour Device Discovery](../connection-advanced/bonjour-device-discovery.md) for further details.

## Further reading

- [Autogenerated docs for the module `InstanceBase` class](https://bitfocus.github.io/companion-module-base/classes/InstanceBase.html)
- [Autogenerated docs for User-Config input fields](https://bitfocus.github.io/companion-module-base/interfaces/CompanionConfigField.html)
- [Bonjour Device Discovery](../connection-advanced/bonjour-device-discovery.md)
- [Input-field Types (Options)](./input-field-types.md)
- [Upgrade scripts](./upgrade-scripts.md)
